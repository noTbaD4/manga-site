<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manga Okuyucu</title>
    <style>
        body {
            margin: 0;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            font-family: Arial, sans-serif;
        }

        #mangaImage {
            max-width: 100%;
            height: auto;
            display: block;
            cursor: pointer;
        }

        /* Üst Menü Barı */
        #topbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            z-index: 1000;
            
            /* Başta tamamen yukarıda gizli */
            transform: translateY(-100%);
            transition: transform 0.2s ease-out;
            pointer-events: all; /* Tıklanabilir olsun */
        }

        /* Bu sınıf eklendiğinde bar görünür olacak */
        #topbar.active {
            transform: translateY(0);
        }

        /* Mouse'u yakalayan görünmez alan */
        #top-trigger {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 40px; /* Bu alanı biraz genişlettik */
            z-index: 999;
            background: transparent;
        }

        select {
            padding: 5px;
            background: #333;
            color: white;
            border: 1px solid #555;
        }
    </style>
</head>
<body>

    <div id="top-trigger"></div>

    <div id="topbar">
        <span id="mangaTitleDisplay">Manga</span>
        <div>
            Sayfa: <select id="pageSelect"></select> / <span id="totalDisplay">20</span>
        </div>
    </div>

    <img id="mangaImage" src="">

    <script>
        const params = new URLSearchParams(window.location.search);
        const mangaName = params.get('manga') || "manga1"; 
        
        let currentPage = 1;
        const totalPages = 20; 
        const folderPath = `manga/${mangaName}/chapter1/`;

        const imgElement = document.getElementById("mangaImage");
        const selectElement = document.getElementById("pageSelect");
        const topbar = document.getElementById("topbar");
        const trigger = document.getElementById("top-trigger");

        // Sayfa listesini oluştur
        for (let i = 1; i <= totalPages; i++) {
            let opt = document.createElement("option");
            opt.value = i;
            opt.text = i;
            selectElement.appendChild(opt);
        }

        function updatePage() {
            let pageNum = currentPage.toString().padStart(2, '0');
            imgElement.src = `${folderPath}${pageNum}_clean.jpg`;
            selectElement.value = currentPage;
            window.scrollTo(0, 0);
        }

        // Tıklama ile sayfa geçişi
        document.addEventListener("click", function(e) {
            if (e.target.closest('#topbar')) return;
            if (e.clientX > window.innerWidth / 2) {
                if (currentPage < totalPages) currentPage++;
            } else {
                if (currentPage > 1) currentPage--;
            }
            updatePage();
        });

        selectElement.addEventListener("change", function() {
            currentPage = parseInt(this.value);
            updatePage();
        });

        // --- TİTREME ENGELLEYİCİ MANTIK ---
        
        // Mouse tetikleyici alana girince aç
        trigger.addEventListener("mouseenter", () => {
            topbar.classList.add("active");
        });

        // Mouse barın üzerinden çıkınca kapat
        topbar.addEventListener("mouseleave", () => {
            topbar.classList.remove("active");
        });

        // Sayfa ilk açıldığında göster
        updatePage();
    </script>
</body>
</html>
